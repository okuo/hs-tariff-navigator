# HS Tariff Navigator Database Setup

## 繧ｻ繝・ヨ繧｢繝・・謇矩・
### 1. Supabase繝繝・す繝･繝懊・繝峨↓繧｢繧ｯ繧ｻ繧ｹ
1. [Supabase Dashboard](https://supabase.com/dashboard) 縺ｫ繝ｭ繧ｰ繧､繝ｳ
2. `hs-tariff-navigator` 繝励Ο繧ｸ繧ｧ繧ｯ繝医ｒ驕ｸ謚・
### 2. 繝・・繧ｿ繝吶・繧ｹ繧ｹ繧ｭ繝ｼ繝樔ｽ懈・
蟾ｦ蛛ｴ繝｡繝九Η繝ｼ縺ｮ縲・*SQL Editor**縲阪ｒ繧ｯ繝ｪ繝・け縺励∽ｻ･荳九・鬆・ｺ上〒SQL繝輔ぃ繧､繝ｫ繧貞ｮ溯｡鯉ｼ・
#### 繧ｹ繝・ャ繝・: 繧ｹ繧ｭ繝ｼ繝樔ｽ懈・
`schema.sql` 縺ｮ蜀・ｮｹ繧偵さ繝斐・・・・繝ｼ繧ｹ繝医＠縺ｦ螳溯｡・- HS繧ｳ繝ｼ繝峨・繧ｹ繧ｿ繝ｼ繝・・繝悶Ν
- FTA/EPA蜊泌ｮ壹・繧ｹ繧ｿ繝ｼ繝・・繝悶Ν  
- 髢｢遞守紫繝・・繝悶Ν
- 讀懃ｴ｢螻･豁ｴ繝・・繝悶Ν
- 繧､繝ｳ繝・ャ繧ｯ繧ｹ菴懈・

#### 繧ｹ繝・ャ繝・: 繧ｻ繧ｭ繝･繝ｪ繝・ぅ繝昴Μ繧ｷ繝ｼ險ｭ螳・`security.sql` 縺ｮ蜀・ｮｹ繧偵さ繝斐・・・・繝ｼ繧ｹ繝医＠縺ｦ螳溯｡・- RLS (Row Level Security) 譛牙柑蛹・- 隱ｭ縺ｿ蜿悶ｊ繝ｻ譖ｸ縺崎ｾｼ縺ｿ繝昴Μ繧ｷ繝ｼ險ｭ螳・
#### 繧ｹ繝・ャ繝・: 繧ｹ繝医い繝峨ヵ繧｡繝ｳ繧ｯ繧ｷ繝ｧ繝ｳ菴懈・
`functions.sql` 縺ｮ蜀・ｮｹ繧偵さ繝斐・・・・繝ｼ繧ｹ繝医＠縺ｦ螳溯｡・- HS繧ｳ繝ｼ繝画､懃ｴ｢髢｢謨ｰ
- 髢｢遞取怙驕ｩ蛹夜未謨ｰ
- 蝗ｽ蛻･蜊泌ｮ壽､懃ｴ｢髢｢謨ｰ

#### 繧ｹ繝・ャ繝・: 繧ｵ繝ｳ繝励Ν繝・・繧ｿ謚募・
`sample_data.sql` 縺ｮ蜀・ｮｹ繧偵さ繝斐・・・・繝ｼ繧ｹ繝医＠縺ｦ螳溯｡・- HS繧ｳ繝ｼ繝峨し繝ｳ繝励Ν繝・・繧ｿ
- FTA/EPA蜊泌ｮ壹ョ繝ｼ繧ｿ
- 髢｢遞守紫繝・・繧ｿ

### 3. 蜍穂ｽ懃｢ｺ隱・
莉･荳九・繧ｯ繧ｨ繝ｪ縺ｧ蜍穂ｽ懃｢ｺ隱搾ｼ・
```sql
-- HS繧ｳ繝ｼ繝画､懃ｴ｢繝・せ繝・SELECT * FROM search_hs_codes('髮ｻ豎', 5);

-- 髢｢遞取怙驕ｩ蛹悶ユ繧ｹ繝・SELECT optimize_tariff('8507100000', 'JP', 'CN', 1000000);

-- 蜊泌ｮ壽､懃ｴ｢繝・せ繝・SELECT * FROM get_agreements_by_countries('JP', 'AU');
```

### 4. 諡｡蠑ｵ讖溯・繝・せ繝・
1. Chrome諡｡蠑ｵ讖溯・繧貞・隱ｭ縺ｿ霎ｼ縺ｿ
2. 繝昴ャ繝励い繝・・縺ｧ縲碁崕豎縲咲ｭ峨ｒ讀懃ｴ｢
3. 髢｢遞取怙驕ｩ蛹悶ｒ螳溯｡・4. 邨先棡縺梧ｭ｣蟶ｸ縺ｫ陦ｨ遉ｺ縺輔ｌ繧九％縺ｨ繧堤｢ｺ隱・
## 繝輔ぃ繧､繝ｫ讒区・

```
database/
笏懌楳笏 schema.sql      # 繝・・繝悶Ν螳夂ｾｩ繝ｻ繧､繝ｳ繝・ャ繧ｯ繧ｹ
笏懌楳笏 security.sql    # RLS繝昴Μ繧ｷ繝ｼ險ｭ螳・笏懌楳笏 functions.sql   # 繧ｹ繝医い繝峨ヵ繧｡繝ｳ繧ｯ繧ｷ繝ｧ繝ｳ
笏懌楳笏 sample_data.sql # 繧ｵ繝ｳ繝励Ν繝・・繧ｿ
笏披楳笏 README.md      # 縺薙・謇矩・嶌
```

## 豕ｨ諢丈ｺ矩・
- SQL繝輔ぃ繧､繝ｫ縺ｯ鬆・ｺ城壹ｊ縺ｫ螳溯｡後＠縺ｦ縺上□縺輔＞
- 繧ｨ繝ｩ繝ｼ縺檎匱逕溘＠縺溷ｴ蜷医・縲∝燕縺ｮ繧ｹ繝・ャ繝励ｒ遒ｺ隱阪＠縺ｦ縺上□縺輔＞
- 繧ｵ繝ｳ繝励Ν繝・・繧ｿ縺ｯ髢狗匱繝ｻ繝・せ繝育畑縺ｧ縺吶よ悽逡ｪ迺ｰ蠅・〒縺ｯ螳滄圀縺ｮ繝・・繧ｿ縺ｫ鄂ｮ縺肴鋤縺医※縺上□縺輔＞

